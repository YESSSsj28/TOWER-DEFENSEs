using UnityEngine;

public class PlayerController : MonoBehaviour
{
    public float moveSpeed = 5f;
    public float jumpHeight = 5f;
    public float dashDistance = 3f;
    public float dashCooldown = 3f;

    private float dashCooldownTimer = 0f;
    private bool isGrounded;
    private Rigidbody rb;

    void Start()
    {
        rb = GetComponent<Rigidbody>();
    }

    void Update()
    {
        MovePlayer();
        Jump();
        Dash();
        HandleCooldown();
    }

    void MovePlayer()
    {
        float moveX = Input.GetAxis("Horizontal");
        float moveZ = Input.GetAxis("Vertical");
        
        Vector3 moveDirection = new Vector3(moveX, 0f, moveZ).normalized;
        rb.MovePosition(transform.position + moveDirection * moveSpeed * Time.deltaTime);
    }

    void Jump()
    {
        isGrounded = Physics.Raycast(transform.position, Vector3.down, 1f);

        if (isGrounded && Input.GetKeyDown(KeyCode.Space))
        {
            rb.AddForce(Vector3.up * jumpHeight, ForceMode.VelocityChange);
        }
    }

    void Dash()
    {
        if (dashCooldownTimer <= 0f && Input.GetKeyDown(KeyCode.LeftShift))
        {
            Vector3 dashDirection = transform.forward * dashDistance;
            rb.MovePosition(transform.position + dashDirection);
            dashCooldownTimer = dashCooldown;
        }
    }

    void HandleCooldown()
    {
        if (dashCooldownTimer > 0f)
        {
            dashCooldownTimer -= Time.deltaTime;
        }
    }
}
