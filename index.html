<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Quantum Tycoon</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
  <style>
    /* Quantum Holographic Theme */
    :root {
      --quantum-core: #00f9ff;
      --entanglement: #ff00f9;
      --quantum-field: #001529;
      --hologram-bg: rgba(0,10,30,0.85);
      --hologram-edge: rgba(0,249,255,0.3);
      --text-glow: #e0f9ff;
      --error-pulse: #ff3860;
      --success-pulse: #00ff9d;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }
    
    body {
      font-family: 'Rajdhani', sans-serif;
      background: var(--quantum-field);
      color: var(--text-glow);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      overflow-x: hidden;
      background-image: 
        radial-gradient(circle at 20% 30%, rgba(0,249,255,0.1) 0%, transparent 25%),
        radial-gradient(circle at 80% 70%, rgba(255,0,249,0.1) 0%, transparent 25%);
    }
    
    /* Holographic Grid Background */
    .hologram-grid {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background:
        linear-gradient(rgba(0,249,255,0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0,249,255,0.05) 1px, transparent 1px);
      background-size: 50px 50px;
      z-index: -1;
      animation: gridPulse 15s infinite alternate;
    }
    
    @keyframes gridPulse {
      0% { opacity: 0.3; }
      100% { opacity: 0.7; }
    }
    
    /* Main Container */
    .quantum-terminal {
      width: 95%;
      max-width: 600px;
      margin: 1rem auto;
      border: 1px solid var(--hologram-edge);
      border-radius: 12px;
      background: var(--hologram-bg);
      box-shadow: 0 0 30px rgba(0,249,255,0.2);
      backdrop-filter: blur(8px);
      padding: 1.5rem;
      position: relative;
      overflow: hidden;
    }
    
    .terminal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid var(--hologram-edge);
    }
    
    .terminal-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.8rem;
      background: linear-gradient(90deg, var(--quantum-core), var(--entanglement));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 15px rgba(0,249,255,0.5);
      letter-spacing: 2px;
    }
    
    /* Quantum Display Panel */
    .quantum-display {
      background: rgba(0,20,40,0.7);
      border: 1px solid var(--hologram-edge);
      border-radius: 8px;
      padding: 1.2rem;
      margin-bottom: 1.5rem;
      position: relative;
      overflow: hidden;
    }
    
    .display-value {
      font-family: 'Orbitron', sans-serif;
      font-size: 2.2rem;
      color: var(--quantum-core);
      text-shadow: 0 0 10px var(--quantum-core);
      margin-bottom: 0.3rem;
    }
    
    .display-label {
      font-size: 0.9rem;
      color: rgba(224,249,255,0.7);
      display: flex;
      justify-content: space-between;
    }
    
    /* Quantum Controls */
    .quantum-controls {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    
    .control-btn {
      background: rgba(0,40,80,0.5);
      border: 1px solid var(--hologram-edge);
      border-radius: 8px;
      padding: 1rem;
      font-family: 'Orbitron', sans-serif;
      font-size: 1rem;
      color: var(--text-glow);
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }
    
    .control-btn:hover {
      background: rgba(0,80,120,0.5);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,249,255,0.2);
    }
    
    .control-btn:active {
      transform: translateY(0);
    }
    
    .main-action {
      grid-column: span 2;
      background: linear-gradient(135deg, var(--quantum-core), var(--entanglement));
      font-weight: bold;
      font-size: 1.2rem;
      padding: 1.2rem;
    }
    
    /* Quantum Matrix (Upgrades) */
    .quantum-matrix {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    
    .matrix-node {
      background: rgba(0,15,30,0.8);
      border: 1px solid var(--hologram-edge);
      border-radius: 8px;
      padding: 1rem;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .node-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
      font-family: 'Orbitron', sans-serif;
    }
    
    .node-name {
      color: var(--quantum-core);
    }
    
    .node-cost {
      color: var(--entanglement);
    }
    
    .node-desc {
      font-size: 0.9rem;
      color: rgba(224,249,255,0.7);
      margin-bottom: 0.5rem;
    }
    
    .node-progress {
      height: 4px;
      background: rgba(0,249,255,0.1);
      border-radius: 2px;
      margin-top: 0.5rem;
      overflow: hidden;
    }
    
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--quantum-core), var(--entanglement));
      width: 0%;
      transition: width 0.5s ease;
    }
    
    /* Quantum Effects */
    @keyframes pulse {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.05); opacity: 0.8; }
      100% { transform: scale(1); opacity: 1; }
    }
    
    .quantum-pulse {
      animation: pulse 0.5s ease;
    }
    
    /* Admin Panel */
    .admin-console {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,5,15,0.95);
      z-index: 1000;
      padding: 2rem;
      overflow-y: auto;
    }
    
    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }
    
    .admin-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.5rem;
      color: var(--quantum-core);
    }
    
    .user-list {
      max-height: 60vh;
      overflow-y: auto;
      margin-bottom: 1.5rem;
    }
    
    .user-card {
      background: rgba(0,20,40,0.7);
      border: 1px solid var(--hologram-edge);
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 0.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .admin-actions {
      display: flex;
      gap: 0.5rem;
    }
    
    .admin-btn {
      padding: 0.5rem 1rem;
      border-radius: 6px;
      border: none;
      font-family: 'Rajdhani', sans-serif;
      font-weight: bold;
      cursor: pointer;
    }
    
    .ban-btn {
      background: var(--error-pulse);
      color: white;
    }
    
    .unban-btn {
      background: var(--success-pulse);
      color: black;
    }
    
    /* Responsive Adjustments */
    @media (max-width: 600px) {
      .quantum-controls {
        grid-template-columns: 1fr;
      }
      
      .main-action {
        grid-column: span 1;
      }
      
      .terminal-title {
        font-size: 1.5rem;
      }
      
      .display-value {
        font-size: 1.8rem;
      }
    }
  </style>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
  <div class="hologram-grid"></div>
  
  <div class="quantum-terminal">
    <div class="terminal-header">
      <h1 class="terminal-title">QUANTUM TYCOON</h1>
      <div id="googleSignIn"></div>
    </div>
    
    <div id="userProfile" style="display: none;">
      <div class="quantum-display">
        <div class="display-value" id="quantumValue">0</div>
        <div class="display-label">
          <span>QUANTUM ENERGY</span>
          <span id="energyRate">0 QE/s</span>
        </div>
      </div>
      
      <div class="quantum-controls">
        <button class="control-btn" id="upgradeBtn">UPGRADES</button>
        <button class="control-btn" id="entangleBtn">ENTANGLE</button>
        <button class="control-btn main-action" id="quantumTap">HARVEST QE</button>
      </div>
      
      <div class="quantum-matrix" id="quantumMatrix">
        <!-- Upgrades will be added here dynamically -->
      </div>
    </div>
  </div>
  
  <div class="admin-console" id="adminConsole">
    <div class="admin-header">
      <h2 class="admin-title">QUANTUM ADMIN CONSOLE</h2>
      <button class="control-btn" id="closeAdmin">CLOSE</button>
    </div>
    
    <div class="user-list" id="userList">
      <!-- Users will be added here dynamically -->
    </div>
    
    <button class="control-btn main-action" id="refreshUsers">REFRESH USERS</button>
  </div>

  <script>
    // ======================
    // QUANTUM GAME STATE
    // ======================
    const ADMIN_EMAIL = "yhpatel@lcstudents.com";
    let player = {
      name: "Quantum Traveler",
      email: "",
      avatar: "",
      id: "",
      isAdmin: false
    };
    
    let game = {
      quantumEnergy: 0,
      energyPerClick: 1,
      energyPerSecond: 0,
      entanglement: 0,
      upgrades: [
        { id: 1, name: "QUBIT GENERATOR", cost: 10, effect: 0.5, owned: 0, desc: "Basic quantum fluctuation generator" },
        { id: 2, name: "SUPERPOSITION CORE", cost: 50, effect: 2, owned: 0, desc: "Exists in multiple states simultaneously" },
        { id: 3, name: "ENTANGLEMENT LINK", cost: 100, effect: 3, owned: 0, desc: "Instant connection across spacetime" },
        { id: 4, name: "QUANTUM COMPUTER", cost: 200, effect: 5, owned: 0, desc: "Exponential processing power" },
        { id: 5, name: "TEMPORAL ENGINE", cost: 500, effect: 8, owned: 0, desc: "Manipulate the flow of time" },
        { id: 6, name: "WORMHOLE STABILIZER", cost: 1000, effect: 12, owned: 0, desc: "Bridge distant points in space" }
      ],
      entanglements: [
        { id: 1, name: "QUANTUM BOOST", cost: 1, effect: 1.1, purchased: false, desc: "+10% to all quantum energy" },
        { id: 2, name: "ENTANGLED CLICKS", cost: 3, effect: 2, purchased: false, desc: "Double click power", clickEffect: true },
        { id: 3, name: "SUPERPOSED OUTPUT", cost: 5, effect: 1.5, purchased: false, desc: "+50% to passive generation" }
      ]
    };
    
    // ======================
    // QUANTUM FUNCTIONS
    // ======================
    function quantumLoop() {
      game.quantumEnergy += game.energyPerSecond;
      updateDisplay();
      saveGame();
    }
    
    function harvestEnergy() {
      game.quantumEnergy += game.energyPerClick;
      updateDisplay();
      saveGame();
      
      // Visual feedback
      document.getElementById("quantumValue").classList.add("quantum-pulse");
      setTimeout(() => {
        document.getElementById("quantumValue").classList.remove("quantum-pulse");
      }, 500);
      
      // Create quantum particle effect
      createParticle();
    }
    
    function createParticle() {
      const particle = document.createElement("div");
      particle.style.position = "fixed";
      particle.style.width = "10px";
      particle.style.height = "10px";
      particle.style.backgroundColor = Math.random() > 0.5 ? "var(--quantum-core)" : "var(--entanglement)";
      particle.style.borderRadius = "50%";
      particle.style.pointerEvents = "none";
      particle.style.zIndex = "100";
      
      // Random position around click area
      const x = 50 + (Math.random() * 20 - 10);
      const y = 50 + (Math.random() * 20 - 10);
      particle.style.left = `${x}%`;
      particle.style.top = `${y}%`;
      
      // Animation
      const animation = particle.animate([
        { transform: "scale(1)", opacity: 1 },
        { transform: "scale(3)", opacity: 0 }
      ], {
        duration: 1000,
        easing: "cubic-bezier(0.22, 1, 0.36, 1)"
      });
      
      document.body.appendChild(particle);
      animation.onfinish = () => particle.remove();
    }
    
    function updateDisplay() {
      document.getElementById("quantumValue").textContent = Math.floor(game.quantumEnergy).toLocaleString();
      document.getElementById("energyRate").textContent = `${game.energyPerSecond.toFixed(1)} QE/s`;
      renderUpgrades();
    }
    
    function renderUpgrades() {
      const matrix = document.getElementById("quantumMatrix");
      matrix.innerHTML = "";
      
      game.upgrades.forEach(upgrade => {
        const upgradeCost = getUpgradeCost(upgrade);
        const canAfford = game.quantumEnergy >= upgradeCost;
        const progress = Math.min(1, game.quantumEnergy / upgradeCost);
        
        const node = document.createElement("div");
        node.className = `matrix-node ${canAfford ? "unlocked" : "locked"}`;
        node.dataset.id = upgrade.id;
        
        node.innerHTML = `
          <div class="node-header">
            <span class="node-name">${upgrade.name}</span>
            <span class="node-cost">${upgradeCost.toLocaleString()} QE</span>
          </div>
          <div class="node-desc">${upgrade.desc}</div>
          <div class="node-progress">
            <div class="progress-bar" style="width: ${progress * 100}%"></div>
          </div>
        `;
        
        matrix.appendChild(node);
      });
    }
    
    function buyUpgrade(id) {
      const upgrade = game.upgrades.find(u => u.id === id);
      const cost = getUpgradeCost(upgrade);
      
      if (game.quantumEnergy >= cost) {
        game.quantumEnergy -= cost;
        upgrade.owned++;
        game.energyPerSecond += upgrade.effect;
        updateDisplay();
        saveGame();
        
        // Visual feedback
        const node = document.querySelector(`.matrix-node[data-id="${id}"]`);
        if (node) {
          node.classList.add("quantum-pulse");
          setTimeout(() => node.classList.remove("quantum-pulse"), 500);
        }
      }
    }
    
    function getUpgradeCost(upgrade) {
      return Math.floor(upgrade.cost * Math.pow(1.15, upgrade.owned));
    }
    
    // ======================
    // QUANTUM AUTHENTICATION
    // ======================
    function handleQuantumSignIn(response) {
      try {
        const userData = parseJWT(response.credential);
        player.name = userData.name;
        player.email = userData.email;
        player.avatar = userData.picture;
        player.id = userData.sub;
        
        // Check if admin
        if (player.email === ADMIN_EMAIL) {
          player.isAdmin = true;
        }
        
        // Unban admin if somehow banned
        if (player.isAdmin && localStorage.getItem(`banned_${player.id}`)) {
          localStorage.removeItem(`banned_${player.id}`);
        }
        
        // Check if banned
        if (localStorage.getItem(`banned_${player.id}`)) {
          showBannedMessage();
          return;
        }
        
        // Show game UI
        document.getElementById("userProfile").style.display = "block";
        
        // Hide Google sign-in
        document.getElementById("googleSignIn").style.display = "none";
        
        // Save user data
        localStorage.setItem("quantumPlayer", JSON.stringify(player));
        
        // Load game
        loadGame();
        
        // Start game loop
        setInterval(quantumLoop, 1000);
      } catch (error) {
        console.error("Quantum sign-in error:", error);
      }
    }
    
    function parseJWT(token) {
      const base64Url = token.split('.')[1];
      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
      return JSON.parse(atob(base64));
    }
    
    function showBannedMessage() {
      alert("Your quantum access has been restricted. Please contact the administrator.");
      signOut();
    }
    
    function signOut() {
      google.accounts.id.disableAutoSelect();
      localStorage.removeItem("quantumPlayer");
      location.reload();
    }
    
    // ======================
    // ADMIN FUNCTIONS
    // ======================
    function loadAdminUsers() {
      const userList = document.getElementById("userList");
      userList.innerHTML = "<p>Scanning quantum network...</p>";
      
      // Get all users from localStorage
      const users = [];
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key.startsWith("quantumSave_")) {
          const userData = JSON.parse(localStorage.getItem(key));
          users.push({
            id: userData.id,
            name: userData.name || "Quantum Traveler",
            energy: userData.quantumEnergy || 0,
            entanglement: userData.entanglement || 0
          });
        }
      }
      
      renderAdminUsers(users);
    }
    
    function renderAdminUsers(users) {
      const userList = document.getElementById("userList");
      userList.innerHTML = "";
      
      if (users.length === 0) {
        userList.innerHTML = "<p>No quantum travelers detected</p>";
        return;
      }
      
      users.forEach(user => {
        const isBanned = localStorage.getItem(`banned_${user.id}`) === "true";
        
        const userCard = document.createElement("div");
        userCard.className = "user-card";
        userCard.innerHTML = `
          <div>
            <strong>${user.name}</strong>
            <div>QE: ${Math.floor(user.energy).toLocaleString()}</div>
          </div>
        `;
        
        const actions = document.createElement("div");
        actions.className = "admin-actions";
        
        if (isBanned) {
          const unbanBtn = document.createElement("button");
          unbanBtn.className = "admin-btn unban-btn";
          unbanBtn.textContent = "UNBAN";
          unbanBtn.onclick = () => unbanUser(user.id);
          actions.appendChild(unbanBtn);
        } else {
          const banBtn = document.createElement("button");
          banBtn.className = "admin-btn ban-btn";
          banBtn.textContent = "BAN";
          banBtn.onclick = () => banUser(user.id);
          actions.appendChild(banBtn);
        }
        
        userCard.appendChild(actions);
        userList.appendChild(userCard);
      });
    }
    
    function banUser(userId) {
      localStorage.setItem(`banned_${userId}`, "true");
      loadAdminUsers();
      
      // If banning current user, show message
      if (userId === player.id) {
        setTimeout(showBannedMessage, 500);
      }
    }
    
    function unbanUser(userId) {
      localStorage.removeItem(`banned_${userId}`);
      loadAdminUsers();
    }
    
    // ======================
    // SAVE/LOAD SYSTEM
    // ======================
    function saveGame() {
      const saveData = {
        ...game,
        name: player.name,
        id: player.id
      };
      
      localStorage.setItem(`quantumSave_${player.id}`, JSON.stringify(saveData));
    }
    
    function loadGame() {
      const savedData = localStorage.getItem(`quantumSave_${player.id}`);
      if (savedData) {
        const loadedData = JSON.parse(savedData);
        
        game.quantumEnergy = loadedData.quantumEnergy || 0;
        game.energyPerClick = loadedData.energyPerClick || 1;
        game.energyPerSecond = loadedData.energyPerSecond || 0;
        game.entanglement = loadedData.entanglement || 0;
        
        // Load upgrades
        if (loadedData.upgrades) {
          loadedData.upgrades.forEach(savedUpgrade => {
            const upgrade = game.upgrades.find(u => u.id === savedUpgrade.id);
            if (upgrade) {
              upgrade.owned = savedUpgrade.owned || 0;
            }
          });
        }
        
        updateDisplay();
      }
    }
    
    // ======================
    // EVENT LISTENERS
    // ======================
    document.addEventListener("DOMContentLoaded", () => {
      // Initialize Google Sign-In
      google.accounts.id.initialize({
        client_id: "626223048098-078etpvps2clhd02vs3g5h22sa60537g.apps.googleusercontent.com",
        callback: handleQuantumSignIn
      });
      
      google.accounts.id.renderButton(
        document.getElementById("googleSignIn"),
        { theme: "filled_blue", size: "medium", shape: "pill" }
      );
      
      // Check for saved player
      const savedPlayer = localStorage.getItem("quantumPlayer");
      if (savedPlayer) {
        player = JSON.parse(savedPlayer);
        
        if (player.isAdmin) {
          document.getElementById("adminConsole").style.display = "block";
          loadAdminUsers();
        } else if (!localStorage.getItem(`banned_${player.id}`)) {
          document.getElementById("userProfile").style.display = "block";
          document.getElementById("googleSignIn").style.display = "none";
          loadGame();
          setInterval(quantumLoop, 1000);
        }
      }
      
      // Game controls
      document.getElementById("quantumTap").addEventListener("click", harvestEnergy);
      
      // Spacebar control
      document.addEventListener("keydown", (e) => {
        if (e.code === "Space") {
          e.preventDefault();
          harvestEnergy();
        }
      });
      
      // Upgrade click handler
      document.getElementById("quantumMatrix").addEventListener("click", (e) => {
        const node = e.target.closest(".matrix-node.unlocked");
        if (node) {
          const upgradeId = parseInt(node.dataset.id);
          buyUpgrade(upgradeId);
        }
      });
      
      // Admin controls
      if (player.isAdmin) {
        document.getElementById("refreshUsers").addEventListener("click", loadAdminUsers);
        document.getElementById("closeAdmin").addEventListener("click", () => {
          document.getElementById("adminConsole").style.display = "none";
        });
      }
    });
  </script>
</body>
</html>
